(()=>{"use strict";function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const t=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=document.getElementById("food")}var i,n;return i=t,(n=[{key:"X",get:function(){return this.element.offsetLeft}},{key:"Y",get:function(){return this.element.offsetTop}},{key:"change",value:function(){this.element.style.left=10*Math.round(28*Math.random())+"px",this.element.style.top=10*Math.round(28*Math.random())+"px"}}])&&e(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),t}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;i(this,e),this.score=0,this.level=1,this.scoreSpan=document.getElementById("score"),this.levelSpan=document.getElementById("level"),this.maxLevel=t,this.upScore=n}var t,o;return t=e,(o=[{key:"addScore",value:function(){this.score++,this.scoreSpan.innerHTML=this.score+"",this.score%this.upScore==0&&this.addLevel()}},{key:"addLevel",value:function(){this.level<this.maxLevel&&(this.level++,this.levelSpan.innerHTML=this.level+"")}}])&&n(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=document.getElementById("snake"),this.head=document.querySelector("#snake>div"),this.bodies=this.element.getElementsByTagName("div")}var t,i;return t=e,(i=[{key:"X",get:function(){return this.head.offsetLeft},set:function(e){if(this.X!==e&&(this.bodies[1]&&this.bodies[1].offsetLeft===e&&(e=e>this.X?this.X-10:this.X+10),this.moveBody(),this.head.style.left=e+"px",this.checkHead(),e<0||e>290))throw"YOU ARE DEAD!"}},{key:"Y",get:function(){return this.head.offsetTop},set:function(e){if(this.Y!==e&&(this.bodies[1]&&this.bodies[1].offsetTop===e&&(e=e>this.Y?this.Y-10:this.Y+10),this.moveBody(),this.head.style.top=e+"px",this.checkHead(),e<0||e>290))throw"YOU ARE DEAD!"}},{key:"addBody",value:function(){this.element.insertAdjacentHTML("beforeend","<div></div>")}},{key:"moveBody",value:function(){for(var e=this.bodies.length-1;e>0;e--){var t=this.bodies[e-1].offsetLeft,i=this.bodies[e-1].offsetTop;this.bodies[e].style.left=t+"px",this.bodies[e].style.top=i+"px"}}},{key:"checkHead",value:function(){for(var e=1;e<this.bodies.length-1;e++){var t=this.bodies[e];if(this.X===t.offsetLeft&&this.Y===t.offsetTop)throw"GAME OVER!"}}}])&&s(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.direction="",this.isLive=!0,this.food=new t,this.scorepanel=new o(10,1),this.snake=new r,this.init(),this.dis=document.querySelector("#disruption")}var i,n;return i=e,(n=[{key:"init",value:function(){document.addEventListener("keydown",this.startHandler.bind(this)),this.run()}},{key:"startHandler",value:function(e){this.direction=e.key,this.dis.innerText=""}},{key:"run",value:function(){var e=this.snake.X,t=this.snake.Y;switch(this.direction){case"ArrowUp":case"Up":t-=10;break;case"ArrowDown":case"Down":t+=10;break;case"ArrowLeft":case"Left":e-=10;break;case"ArrowRight":case"Right":e+=10}try{this.snake.X=e,this.snake.Y=t}catch(e){alert(e),this.isLive=!1}this.checkFood(),this.isLive&&setTimeout(this.run.bind(this),30*(this.scorepanel.maxLevel+1-this.scorepanel.level))}},{key:"checkFood",value:function(){this.snake.X===this.food.X&&this.snake.Y===this.food.Y&&(console.log("GET FOOD!"),this.food.change(),this.scorepanel.addScore(),this.snake.addBody())}}])&&a(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),e}())})();